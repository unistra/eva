{% extends 'base.html' %}
{% load staticfiles %}
{% load i18n %}
{% load crispy_forms_tags %}

{% block breadcrumb %}
    <ol class="breadcrumb">
        <li><a href="{% url 'rules:list'%}">{% trans "Règles générales" %}</a></li>
        <li class="active">{{rule.label}}</li>
    </ol>
{% endblock %}

{% block page-header %}
<link rel="stylesheet" type="text/css" href="{% static 'css/rules.css' %}" />
{% trans "Fiche détaillée d'une règle générale" %}
{% endblock %}

{% block app_content %}
<div class="upper-part">

  <div class="parent-rule">
      
      <div class="alert alert-danger" role="alert" {%if not error%}hidden="true"{%endif%}>
          <p>
              {{error}}
          </p>
      </div>

  <form class="" action="" method="post">
    {% crispy form %}

  </form>
  </div>

      <div class="up-right-part  {%if not editing%}disabled{%else%}{%endif%}">
{% include "rules/create/top-right.html" with  rule_id=latest_id%}
      </div>
</div>
<div class="rule-bottom-part  {%if not editing%}disabled{%else%}{%endif%}">
{% include "rules/create/bottom.html" with creating='creating' rule_id='latest_id'%}
</div>


<script type="text/javascript">

var _isEdited = false;
$(':input').not('.display-order', '#selectDegree').change(function () {
  _isEdited = true;
  if (this.id === "selectDegree") {
      _isEdited = false;
  }
});


$(document).ready(function () {


window.onbeforeunload = function (e) {
if (_isEdited === true) {
var e = e || window.event;

// For IE and Firefox
if (e) {
  e.returnValue = 'Des modifications ont été effectuées.';
}

// For Safari
return 'Des modifications ont été effectuées.';
};
};
});

</script>

{%endblock%}
